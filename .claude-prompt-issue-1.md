# Claude Code Prompt - Issue #1

## Context from GitHub Issue

**Issue:** #1 - [FEATURE] Add task creation endpoint
**Type:** feature
**Branch:** feature/1--feature-add-task-creation-end

---

## Acceptance Criteria
  - [ ] POST /api/tasks endpoint accepts { title, description }
  - [ ] Tasks are stored in memory (array) for now
  - [ ] Endpoint returns created task with auto-generated ID
  - [ ] Input validation (title is required)
  - [ ] Proper HTTP status codes (201 for success, 400 for validation errors)

---

## Architecture/Solution (from @claude discussion)

  @claude Please help design the architecture for this task manager API:

  **Questions:**
  1. What's the best structure for a simple Node.js REST API?
  2. Should we use Express.js or another framework?
  3. How should we structure the project folders?
  4. What about error handling and validation?

  **Constraints:**
  - Tech stack: Node.js (simple, no database for now)
  - Performance requirements: Basic REST API
  - Security considerations: Input validation


## @claude Recommendations
**Claude finished @PankajTanwar7's task** â€”â€” [View job](https://github.com/PankajTanwar7/task-manager-demo/actions/runs/19542701260)

---
### ðŸ‘‹ Hi! Yes, I'm here to help!

Let me answer your architecture questions for the task manager API!

### ðŸ“‹ Todo List
- [x] Check repository structure and setup files
- [x] Answer architecture questions
- [x] Provide implementation recommendations

---

### ðŸ—ï¸ Architecture Recommendations

#### 1. **Best Structure for a Simple Node.js REST API**

For your task manager API, I recommend a **layered architecture** with clear separation of concerns:

```
src/
â”œâ”€â”€ server.js              # Express app setup & startup
â”œâ”€â”€ routes/                # Route definitions
â”‚   â””â”€â”€ tasks.js          # Task routes (POST, GET, etc.)
â”œâ”€â”€ controllers/           # Business logic
â”‚   â””â”€â”€ taskController.js # Task operations
â”œâ”€â”€ models/                # Data models
â”‚   â””â”€â”€ Task.js           # Task model & in-memory store
â”œâ”€â”€ middleware/            # Custom middleware
â”‚   â””â”€â”€ validation.js     # Input validation
â””â”€â”€ utils/                 # Helper functions
    â””â”€â”€ errorHandler.js   # Error handling utilities

tests/
â””â”€â”€ tasks.test.js          # API tests
```

**Why this structure?**
- âœ… **Scalability**: Easy to add database later (just swap the model layer)
- âœ… **Maintainability**: Clear separation makes code easy to find and modify
- âœ… **Testability**: Each layer can be tested independently
- âœ… **Standard pattern**: Familiar to most Node.js developers

---

#### 2. **Framework Choice: Express.js** âœ…

**Recommendation: Use Express.js**

**Reasons:**
- âœ… **Industry standard**: Most popular Node.js framework (14M+ weekly downloads)
- âœ… **Simple & lightweight**: Perfect for REST APIs
- âœ… **Great ecosystem**: Middleware for validation, CORS, security, etc.
- âœ… **Easy to learn**: Minimal boilerplate, straightforward routing
- âœ… **Extensive documentation**: Huge community, easy to find solutions

**Alternative considered:** Fastify (faster, but more complex for a simple API)

---

#### 3. **Project Folder Structure**

```
task-manager-demo/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ server.js              # Main server file
â”‚   â”œâ”€â”€ app.js                 # Express app configuration (separate from server)
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â””â”€â”€ tasks.js          # Task routes
â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â””â”€â”€ taskController.js # Task business logic
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ Task.js           # Task model + in-memory storage
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”œâ”€â”€ validation.js     # Input validation middleware
â”‚   â”‚   â””â”€â”€ errorHandler.js   # Global error handler
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ logger.js         # Optional: logging utility
â”‚
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ tasks.test.js         # Task endpoint tests
â”‚   â””â”€â”€ setup.js              # Test configuration
â”‚
â”œâ”€â”€ .env.example              # Environment variables template
â”œâ”€â”€ .gitignore                # Git ignore file
â”œâ”€â”€ package.json              # Dependencies
â””â”€â”€ README.md                 # API documentation
```

**Key principles:**
- **Separation of app & server**: `app.js` exports the Express app, `server.js` starts it (better for testing)
- **Single responsibility**: Each file has one clear purpose
- **Easy navigation**: Intuitive folder names

---

#### 4. **Error Handling & Validation**

**Validation Strategy:**

```javascript
// Use express-validator for input validation
POST /api/tasks
{
  "title": "required, string, min 1 char, max 200 chars",
  "description": "optional, string, max 1000 chars"
}
```

**Recommended approach:**
1. **express-validator**: Industry standard, easy to use
2. **Validation middleware**: Check inputs before controller
3. **Consistent error format**:
   ```json
   {
     "error": "Validation failed",
     "details": [
       {
         "field": "title",
         "message": "Title is required"
       }
     ]
   }
   ```

**Error Handling Strategy:**

```javascript
// Global error handler middleware
app.use((err, req, res, next) => {
  const statusCode = err.statusCode || 500;
  res.status(statusCode).json({
    error: err.message,
    ...(process.env.NODE_ENV === 'development' && { stack: err.stack })
  });
});
```

**HTTP Status Codes:**
- âœ… `201 Created`: Task successfully created
- âœ… `200 OK`: Task retrieved/updated
- âœ… `400 Bad Request`: Validation errors
- âœ… `404 Not Found`: Task doesn't exist
- âœ… `500 Internal Server Error`: Server errors

---

### ðŸ“¦ Recommended Dependencies

```json
{
  "dependencies": {
    "express": "^4.18.2",
    "express-validator": "^7.0.1",
    "dotenv": "^16.3.1",
    "cors": "^2.8.5"
  },
  "devDependencies": {
    "jest": "^29.7.0",
    "supertest": "^6.3.3",
    "nodemon": "^3.0.1"
  }
}
```

---

### ðŸŽ¯ Implementation Overview

**Core files to create:**

**1. `src/models/Task.js`** - Task model with in-memory storage
```javascript
// Simple in-memory array for now
// Easy to replace with database later
let tasks = [];
let nextId = 1;
```

**2. `src/controllers/taskController.js`** - Business logic
```javascript
// createTask, getTasks, getTaskById, updateTask, deleteTask
```

**3. `src/routes/tasks.js`** - Route definitions
```javascript
// POST /api/tasks
// GET /api/tasks
// GET /api/tasks/:id
// etc.
```

**4. `src/middleware/validation.js`** - Input validation
```javascript
// validateCreateTask middleware
// Uses express-validator
```

**5. `src/app.js`** - Express app setup
```javascript
// Middleware, routes, error handlers
```

**6. `src/server.js`** - Server startup
```javascript
// Start listening on port
```

---

### âœ… Security Considerations (Addressed)

- âœ… **Input validation**: express-validator prevents injection attacks
- âœ… **CORS**: Controlled access from allowed origins
- âœ… **Helmet**: Security headers (add later)
- âœ… **Rate limiting**: Prevent abuse (add later if needed)
- âœ… **Environment variables**: Sensitive config in `.env`

---

### ðŸš€ Ready to Implement?

I can implement this entire architecture for you! The implementation will include:

- âœ… All files in the proposed structure
- âœ… Full CRUD operations for tasks (Create, Read, Update, Delete)
- âœ… Proper validation and error handling
- âœ… Tests using Jest and Supertest
- âœ… Documentation in README

**Would you like me to proceed with the implementation?** Just let me know and I'll get started! ðŸŽ¯

---


---

## Files to Modify
  - `src/server.js` (new)
  - `src/routes/tasks.js` (new)
  - `src/controllers/taskController.js` (new)
  - `src/models/Task.js` (new)
  - `tests/tasks.test.js` (new)
  - `package.json` (update with dependencies)

---

## Your Task

Please implement this feature according to the specifications above.

**Requirements:**
1. Follow the architecture discussed in the issue
2. Implement all acceptance criteria
3. Write/update tests
4. Ensure existing tests pass
5. Commit with proper message: "feature: <description> (#1)"

**Note:** This session will be auto-logged to docs/dev-logs/issue-1.md
